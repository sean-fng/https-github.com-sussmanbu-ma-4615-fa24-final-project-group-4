{
  "hash": "887c757ab46a3fdc94cfb5198b727b98",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"blog post 4\"\nauthor: \"\"\ndate: \"2024-10-31\"\ndate-modified: \"2024-10-31\"\ndraft: FALSE\n---\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- readRDS(\"filtered_data_2.rds\")\n\n# Save it as a CSV file\nwrite.csv(data, \"your_file.csv\", row.names = FALSE)\n```\n:::\n\n\nUsed this to view data in excel file for easier visibility and filtering. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(here)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nhere() starts at /Users/seanfung/Documents/BU Fall 2024/MA 415/MA 415 G4 Final Project\n```\n\n\n:::\n\n```{.r .cell-code}\ndata <- readRDS(here(\"filtered_data_2.rds\"))\n\nfiltered_data <- subset(data, Descent_Description != \"Unknown\" & Descent_Description != \"Other\")\n\n# Create a contingency table for the filtered data\ncrime_table_filtered <- table(filtered_data$Descent_Description, filtered_data$Crm.Cd.Desc)\n\nchi_test_filtered <- chisq.test(crime_table_filtered)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning in chisq.test(crime_table_filtered): Chi-squared approximation may be\nincorrect\n```\n\n\n:::\n\n```{.r .cell-code}\nprint(chi_test_filtered)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tPearson's Chi-squared test\n\ndata:  crime_table_filtered\nX-squared = 2363.8, df = 1222, p-value < 2.2e-16\n```\n\n\n:::\n\n```{.r .cell-code}\n# Extract standardized residuals\nstandardized_residuals_filtered <- chi_test_filtered$stdres\n\ntop_crimes <- names(sort(colSums(crime_table_filtered), decreasing = TRUE))[1:20]\n\n# Filter the contingency table to only include top crime types\ncrime_table_top <- crime_table_filtered[, top_crimes]\n\nchi_test_top <- chisq.test(crime_table_top)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning in chisq.test(crime_table_top): Chi-squared approximation may be\nincorrect\n```\n\n\n:::\n\n```{.r .cell-code}\nstandardized_residuals_top <- chi_test_top$stdres\n\n\nresiduals_top_df <- as.data.frame(as.table(standardized_residuals_top))\ncolnames(residuals_top_df) <- c(\"Descent\", \"Crime_Type\", \"Residual\")\n\n\n\nggplot(residuals_top_df, aes(x = Crime_Type, y = Descent, fill = Residual)) +\n  geom_tile() +\n  scale_fill_gradient2(low = \"blue\", mid = \"white\", high = \"red\", midpoint = 0) +\n  labs(title = \"Standardized Residuals of Descent and Top Crime Types\",\n       x = \"Crime Type\", y = \"Descent Category\", fill = \"Residual\") +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](blog-post-4_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n\nI wanted to ask the question of whether every crime was correlated to descent. Therefore, I conducted a chi-squared test and wanted to see how each race's residual was in comparison to the top 10 crimes (all crimes would be too much). \n- We can see that \"White\" had a high residual in the burglary category and higher residuals in some other categories as well. We also see lower than average residuals in the aggrevated assault and simple assault categories. \n- As for Hispanic/Mexican, even though they represent such a high amount of crimes (as seen in last blog post), they are moderately around what is expected with the exception of the \"Burglary\" and \"Theft (under $950) categories.\n- Other Asian slightly higher in \"Burglary\"\n- \"Black\" lower in \"theft from motor vehicle\". \n- \"Filipino\" higher in \"theft from motor vehicle\". \n- \"Chinese\" higher in \"theft - grand except guns or livestock\". \n- Everything else is mostly the same hovering around the expected with small fluctuations.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'dplyr'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n\n\n:::\n\n```{.r .cell-code}\ncrime_hour_descent <- data %>%\n  group_by(Hour, Crm.Cd.Desc, Descent_Description) %>%\n  summarise(Count = n(), .groups = \"drop\") %>%\n  filter(Count > 0)\n\nggplot(crime_hour_descent, aes(x = Hour, y = Descent_Description, fill = Count)) +\n  geom_tile(color = \"white\") +\n  scale_fill_gradient(low = \"lightblue\", high = \"darkred\", name = \"Crime Count\") + \n  labs(title = \"Heatmap of Crime Counts by Hour and Descent\",\n       x = \"Hour of Day\",\n       y = \"Descent Category\")\n```\n\n::: {.cell-output-display}\n![](blog-post-4_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\nI make this plot to visualize how crime frequency varies for each descent category by time of the day. I use heatmap since it provides a direct comparison across different times and descents. This plot clearly shows that certain racial categories, such as White, Hispanic/Latin/Mexican, and Black, experience higher crime rates compared to racial groups like Cambodian and Laotian, potentially due to smaller sample sizes or data collection biases.\n\nThe general trend across most categories indicates a peak in crime rates from late evening to early morning (00:00 to 05:00), which is the same as what we expected. However, an additional peak occurs during daytime (10:00 to 15:00), which is unusual and needs further investigation.\n",
    "supporting": [
      "blog-post-4_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}